name: build component
description: Builds a specified kubeflow component and returns the component specification
inputs:
- {name: repo_dir, type: Directory}
- {name: component_path, type: str}
outputs:
- {name: component_specification, type: YAML}
implementation:
  container:
    image: python:3.7
    command:
    - sh
    - -c
    - (PIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location
      'kfp' || PIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet
      --no-warn-script-location 'kfp' --user) && "$0" "$@"
    - python3 
    - concat: [ { inputPath: repo_dir}, {inputValue: component_path}, "/src/component.py"]
    - concat: [ {outputPath: component_specification}, {inputValue: component_path}]
